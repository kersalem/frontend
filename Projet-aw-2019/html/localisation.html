<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="../css/mystyle.css">
  </head>
	<nav>
		<ul id="menu">
			<li class="menu-item"><a href="agence_voyage.html">Home</a></li>
			<li class="menu-item" id="currentMenu"><a href="localisation.html" class="ex1">Services</a>
				<ul class="sous-menu">
					<li><a href="localisation.html">Location</a></li>
					<li><a href="information.html">Information</a></li>
					<li><a href="assistance.html">Assistance</a></li>
				</ul>
			</li>
			<li class="menu-item"><a href="destinations.html" class="ex1">Destinations</a></li>
			<li class="menu-item"><a href="audio.html" class="ex1">Voyage virtuel:audio</a></li>
			<li class="menu-item"><a href="video.html" class="ex1">Voyage virtuel: video</a></li>
			<li class="menu-item"><a href="contact.html" class="ex1">Contact</a></li>
		</ul>
	</nav>
  <!-- <body onload="initMap()"> -->
    <div id="map"></div>
    <script>
    		var cities = [
          ["Paris", 48.852969, 2.349903],
    			["Brest", 48.383, -4.500],
    			["Quimper", 48.000, -4.100],
    			["Bayonne", 43.500, -1.467]
        ];

    		var lat = 43.7031;
    		var lng = 7.2661;
    		var map = null;

        function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
            // center card : Nice
    			center: new google.maps.LatLng(lat, lng),
    			zoom: 5,
          // Snazzy maps custom color
          });

          setMarkers(map, cities);

          function setMarkers(map, cities) {

            for (var i = 0; i < cities.length; i++) {

                var name = cities[i][0]
                var lat = cities[i][1]
                var long = cities[i][2]

                var latlngset = new google.maps.LatLng(lat, long);

                var marker = new google.maps.Marker({
                  position: latlngset,
                  title: name,
                  map: map,
                });

                map.setCenter(marker.getPosition());
                //console.log('lat = ', name);
                //var content = "TOTO: " + name + " !"

                var infowindow = new google.maps.InfoWindow();
                // google.maps.AddListener(marker, 'click', function (map, marker) {
                //     infowindow.setContent(content)
                //     infowindow.open(map, marker)
                // });

                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                infowindow.setContent(cities[i][0]);
                infowindow.open(map, marker);
                }
                })(marker, i));
            }
        }

          //console.log('cities', cities)
        }
  </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4KfDVFyBkAiw4WWWG-9NuGS04vghxXB4&callback=initMap"
    async defer></script>
  </body>
</html>
